
<html>
<head>

<script language="JavaScript">
// Clients who have iframes enabled run into cross-domain javascript security checks and
// emoticons fails to display in the post form. The fix is to set the domain name to match that
//of the client e.g. set the domain name to "tvguide.com" instead of the default "community.tvguide.com".
//
// But this needs to be tested whether the form can be found first - because for some clients this 'fix' will cause the postform to not be found
try { 
  var myTestField = window.opener.document."></script><script>alert('XSS')</script>0xAli - XSSED<!--.body;
}
catch (err) {
if (document.domain != "localhost") {
   var mydomain = document.domain;
   mydomain_arr = mydomain.split( ".");
   if (mydomain_arr.length > 2) {
       mydomain = mydomain_arr[mydomain_arr.length - 2] + "." + mydomain_arr[mydomain_arr.length  - 1];
       document.domain = mydomain;
   }
}
}
<!--
function select (s) {
  var myField = window.opener.document."></script><script>alert('XSS')</script>0xAli - XSSED<!--.body;
  if (window.opener.document.selection) {
    myField.focus();
    var sel = window.opener.document.selection.createRange();
    sel.text = s;
  } else if (myField.selectionStart || myField.selectionStart == '0') {
    var startPos = myField.selectionStart;
    var endPos = myField.selectionEnd;
    myField.value = myField.value.substring(0, startPos) + s + myField.value.substring(endPos, myField.value.length);
  } else {
    myField.value += s;
  }
  window.close ();
}
function cancel () {
  window.close ();
}
// -->
</script>
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="1">
<tr><td align="center" colspan="4"><span class="lw-text" style="font-size: 12px; font-family: arial,helvetica,sans-serif;">Select Emoticons:</span></td></tr>
<tr><td width="25%"><a href="#" onclick="select (':-)');return false;"><img src="images/emoticons/happy.gif" border="0"></a></td>
<td width="25%"><a href="#" onclick="select (':-(');return false;"><img src="images/emoticons/sad.gif" border="0"></a></td>
<td width="25%"><a href="#" onclick="select (':-D');return false;"><img src="images/emoticons/grin.gif" border="0"></a></td>
<td width="25%"><a href="#" onclick="select (':-x');return false;"><img src="images/emoticons/love.gif" border="0"></a></td></tr>
<tr><td width="25%"><a href="#" onclick="select (':|');return false;"><img src="images/emoticons/plain.gif" border="0"></a></td></td>
<td width="25%"><a href="#" onclick="select ('B-)');return false;"><img src="images/emoticons/cool.gif" border="0"></a></td>
<td width="25%"><a href="#" onclick="select (']:)');return false;"><img src="images/emoticons/devil.gif" border="0"></a></td>
<td width="25%"><a href="#" onclick="select (':-p');return false;"><img src="images/emoticons/silly.gif" border="0"></a></td></tr>
<tr><td width="25%"><a href="#" onclick="select ('X-(');return false;"><img src="images/emoticons/angry.gif" border="0"></a></td>
<td width="25%"><a href="#" onclick="select (':^O');return false;"><img src="images/emoticons/laugh.gif" border="0"></a></td>
<td width="25%"><a href="#" onclick="select (';-)');return false;"><img src="images/emoticons/wink.gif" border="0"></a></td>
<td width="25%"><a href="#" onclick="select (':8}');return false;"><img src="images/emoticons/blush.gif" border="0"></a></td></tr>
<tr><td width="25%"><a href="#" onclick="select (':_|');return false;"><img src="images/emoticons/cry.gif" border="0"></a></td>
<td width="25%"><a href="#" onclick="select ('?:|');return false;"><img src="images/emoticons/confused.gif" border="0"></a></td>
<td width="25%"><a href="#" onclick="select (':O');return false;"><img src="images/emoticons/shocked.gif" border="0"></a></td>
</tr>
<tr><td width="25%"><a href="#" onclick="cancel ();return false;"><img src="images/back-to-16x16.gif" border="0"></a></td></tr>
</table>
</body>
</html>
